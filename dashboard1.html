<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - AutoStreamPro</title>
    <meta name="description" content="Your AutoStreamPro automation dashboard - manage streams, clips, and social media marketing">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚡</text></svg>">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Auth0 SPA SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@auth0/auth0-spa-js@2.1.3/dist/auth0-spa-js.production.min.js"></script>
    
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .dashboard-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(229, 231, 235, 0.8);
            transition: all 0.3s ease;
        }
        
        .dashboard-card:hover {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-live {
            background: #10b981;
            animation: pulse 2s infinite;
        }
        
        .status-offline {
            background: #ef4444;
        }
        
        .status-connected {
            background: #10b981;
        }
        
        .status-disconnected {
            background: #f59e0b;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .metric-card {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(59, 130, 246, 0.4);
        }
        
        .metric-card.green {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .metric-card.purple {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        
        .metric-card.orange {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            cursor: pointer;
            font-size: 14px;
            box-shadow: 0 4px 14px 0 rgba(59, 130, 246, 0.3);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            transform: translateY(-1px);
            box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.4);
        }
        
        .btn-secondary {
            background: white;
            color: #374151;
            border: 1px solid #d1d5db;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 14px;
        }
        
        .btn-secondary:hover {
            background: #f9fafb;
            border-color: #9ca3af;
        }
        
        .sidebar {
            width: 280px;
            background: white;
            border-right: 1px solid #e5e7eb;
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            z-index: 40;
        }
        
        .main-content {
            margin-left: 280px;
            min-height: 100vh;
            background: #f9fafb;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            color: #6b7280;
            text-decoration: none;
            border-radius: 8px;
            margin: 4px 8px;
            transition: all 0.2s ease;
        }
        
        .nav-item:hover {
            background: #f3f4f6;
            color: #374151;
        }
        
        .nav-item.active {
            background: #eff6ff;
            color: #2563eb;
            font-weight: 600;
        }
        
        .nav-item svg {
            width: 20px;
            height: 20px;
            margin-right: 12px;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: #3b82f6;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        .clip-thumbnail {
            width: 120px;
            height: 68px;
            background: #f3f4f6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }
        
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>

<body class="bg-gray-50">
    
    <!-- Sidebar -->
    <div class="sidebar">
        <!-- Logo -->
        <div class="p-6 border-b border-gray-200">
            <div class="flex items-center space-x-3">
                <span class="text-2xl">⚡</span>
                <span class="text-xl font-bold text-gray-900">AutoStreamPro</span>
            </div>
        </div>
        
        <!-- Navigation -->
        <nav class="mt-6">
            <a href="#dashboard" class="nav-item active" onclick="showSection('dashboard')">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v1H8V5z"/>
                </svg>
                Dashboard
            </a>
            
            <a href="#streams" class="nav-item" onclick="showSection('streams')">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
                Live Streams
            </a>
            
            <a href="#clips" class="nav-item" onclick="showSection('clips')">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m-9 4h10a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
                AI Clips
            </a>
            
            <a href="#social" class="nav-item" onclick="showSection('social')">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 3v10a2 2 0 002 2h6a2 2 0 002-2V7H7z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11v6m4-6v6"/>
                </svg>
                Social Media
            </a>
            
            <a href="#automation" class="nav-item" onclick="showSection('automation')">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
                Automation
            </a>
            
            <a href="#analytics" class="nav-item" onclick="showSection('analytics')">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                </svg>
                Analytics
            </a>
        </nav>
        
        <!-- User Profile -->
        <div class="absolute bottom-0 left-0 right-0 p-6 border-t border-gray-200">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center">
                    <span class="text-white font-semibold" id="user-avatar">U</span>
                </div>
                <div class="flex-1">
                    <div class="font-medium text-gray-900" id="user-name">Loading...</div>
                    <div class="text-sm text-gray-600">Pro Plan</div>
                </div>
                <button onclick="logout()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        
        <!-- Header -->
        <header class="bg-white border-b border-gray-200 px-6 py-4">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold text-gray-900" id="page-title">Dashboard</h1>
                    <p class="text-gray-600" id="page-subtitle">Overview of your streaming automation</p>
                </div>
                
                <div class="flex items-center space-x-4">
                    <button class="btn-secondary">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5c-5.5 0-10-4.5-10-10s4.5-10 10-10c2.5 0 4.8.9 6.6 2.4"/>
                        </svg>
                        Refresh Data
                    </button>
                    
                    <button class="btn-primary">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                        </svg>
                        Start Stream
                    </button>
                </div>
            </div>
        </header>

        <!-- Dashboard Section -->
        <div id="dashboard-section" class="p-6">
            
            <!-- Metrics Overview -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="metric-card fade-in">
                    <div class="flex items-center justify-between mb-4">
                        <div class="text-white/80">Total Views</div>
                        <svg class="w-6 h-6 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                    </div>
                    <div class="text-3xl font-bold text-white mb-2">127.5K</div>
                    <div class="text-white/60 text-sm">+12.5% from last week</div>
                </div>
                
                <div class="metric-card green fade-in" style="animation-delay: 0.1s;">
                    <div class="flex items-center justify-between mb-4">
                        <div class="text-white/80">Clips Generated</div>
                        <svg class="w-6 h-6 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 3v10a2 2 0 002 2h6a2 2 0 002-2V7H7z"/>
                        </svg>
                    </div>
                    <div class="text-3xl font-bold text-white mb-2">47</div>
                    <div class="text-white/60 text-sm">23 posted automatically</div>
                </div>
                
                <div class="metric-card purple fade-in" style="animation-delay: 0.2s;">
                    <div class="flex items-center justify-between mb-4">
                        <div class="text-white/80">Engagement Rate</div>
                        <svg class="w-6 h-6 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                        </svg>
                    </div>
                    <div class="text-3xl font-bold text-white mb-2">8.2%</div>
                    <div class="text-white/60 text-sm">Above industry average</div>
                </div>
                
                <div class="metric-card orange fade-in" style="animation-delay: 0.3s;">
                    <div class="flex items-center justify-between mb-4">
                        <div class="text-white/80">Revenue</div>
                        <svg class="w-6 h-6 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"/>
                        </svg>
                    </div>
                    <div class="text-3xl font-bold text-white mb-2">$2,847</div>
                    <div class="text-white/60 text-sm">This month</div>
                </div>
            </div>
            
            <!-- Current Status -->
            <div class="grid lg:grid-cols-3 gap-6 mb-8">
                
                <!-- Stream Status -->
                <div class="dashboard-card p-6 fade-in">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Stream Status</h3>
                        <span class="status-indicator status-offline"></span>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Current Status</span>
                            <span class="font-medium text-red-600">Offline</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Last Stream</span>
                            <span class="font-medium">2 hours ago</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Stream Time</span>
                            <span class="font-medium">4h 32m</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Peak Viewers</span>
                            <span class="font-medium">1,247</span>
                        </div>
                    </div>
                    
                    <button class="btn-primary w-full mt-4" onclick="startStream()">
                        Start New Stream
                    </button>
                </div>
                
                <!-- AI Engine Status -->
                <div class="dashboard-card p-6 fade-in" style="animation-delay: 0.1s;">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">AI Engine</h3>
                        <span class="status-indicator status-connected"></span>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Clip Detection</span>
                            <label class="toggle-switch">
                                <input type="checkbox" checked onchange="toggleAutomation('clips')">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Auto Posting</span>
                            <label class="toggle-switch">
                                <input type="checkbox" checked onchange="toggleAutomation('posting')">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">AI Titles</span>
                            <label class="toggle-switch">
                                <input type="checkbox" checked onchange="toggleAutomation('titles')">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Sentiment Analysis</span>
                            <label class="toggle-switch">
                                <input type="checkbox" onchange="toggleAutomation('sentiment')">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Connected Platforms -->
                <div class="dashboard-card p-6 fade-in" style="animation-delay: 0.2s;">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Connected Platforms</h3>
                        <button class="text-blue-600 hover:text-blue-700 text-sm font-medium" onclick="showSection('social')">
                            Manage
                        </button>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-6 h-6 bg-purple-100 rounded flex items-center justify-center mr-3">
                                    <svg class="w-4 h-4 text-purple-600" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/>
                                    </svg>
                                </div>
                                <span class="font-medium">Twitch</span>
                            </div>
                            <span class="status-indicator status-connected"></span>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-6 h-6 bg-blue-100 rounded flex items-center justify-center mr-3">
                                    <svg class="w-4 h-4 text-blue-600" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                    </svg>
                                </div>
                                <span class="font-medium">Twitter/X</span>
                            </div>
                            <span class="status-indicator status-connected"></span>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-6 h-6 bg-pink-100 rounded flex items-center justify-center mr-3">
                                    <svg class="w-4 h-4 text-pink-600" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.070-4.85.070-3.204 0-3.584-.012-4.849-.070-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                    </svg>
                                </div>
                                <span class="font-medium">Instagram</span>
                            </div>
                            <span class="status-indicator status-connected"></span>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-6 h-6 bg-gray-900 rounded flex items-center justify-center mr-3">
                                    <svg class="w-4 h-4 text-white" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19.321 5.562a5.124 5.124 0 0 1-.443-.258 6.228 6.228 0 0 1-1.137-.966c-.849-.948-1.286-2.081-1.302-3.368H13.82v14.22c-.013 1.685-1.351 3.051-3.029 3.051-1.647 0-2.989-1.335-2.989-2.977 0-1.642 1.342-2.977 2.989-2.977.339 0 .664.06.964.169v-3.004a5.968 5.968 0 0 0-.964-.08c-3.298 0-5.973 2.658-5.973 5.938 0 3.279 2.675 5.938 5.973 5.938 3.298 0 5.973-2.658 5.973-5.938V8.943a9.143 9.143 0 0 0 5.236 1.629v-2.955a6.196 6.196 0 0 1-2.677-2.055z"/>
                                    </svg>
                                </div>
                                <span class="font-medium">TikTok</span>
                            </div>
                            <span class="status-indicator status-disconnected"></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Recent Activity -->
            <div class="dashboard-card p-6 fade-in">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-gray-900">Recent Activity</h3>
                    <button class="text-blue-600 hover:text-blue-700 text-sm font-medium" onclick="showSection('clips')">
                        View All
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center space-x-4 p-3 bg-gray-50 rounded-lg">
                        <div class="clip-thumbnail">
                            <div class="play-button">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium text-gray-900">Epic Headshot Montage</div>
                            <div class="text-sm text-gray-600">Generated 15 minutes ago • Valorant</div>
                            <div class="text-xs text-green-600 font-medium">✓ Posted to Twitter, Instagram</div>
                        </div>
                        <div class="text-sm text-gray-500">
                            <div>1.2K views</div>
                            <div>47 likes</div>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4 p-3 bg-gray-50 rounded-lg">
                        <div class="clip-thumbnail">
                            <div class="play-button">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium text-gray-900">Clutch 1v4 Round</div>
                            <div class="text-sm text-gray-600">Generated 1 hour ago • Valorant</div>
                            <div class="text-xs text-blue-600 font-medium">⏳ Scheduled for 6 PM</div>
                        </div>
                        <div class="text-sm text-gray-500">
                            <div>Pending</div>
                            <div>-</div>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4 p-3 bg-gray-50 rounded-lg">
                        <div class="clip-thumbnail">
                            <div class="play-button">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium text-gray-900">Funny Fail Compilation</div>
                            <div class="text-sm text-gray-600">Generated 3 hours ago • Fortnite</div>
                            <div class="text-xs text-green-600 font-medium">✓ Posted to TikTok, Twitter</div>
                        </div>
                        <div class="text-sm text-gray-500">
                            <div>4.7K views</div>
                            <div>189 likes</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Other sections would be hidden initially -->
        <div id="streams-section" class="p-6 hidden">
            <div class="dashboard-card p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Live Stream Management</h3>
                <p class="text-gray-600">Stream monitoring and management features coming soon...</p>
            </div>
        </div>

        <div id="clips-section" class="p-6 hidden">
            <div class="dashboard-card p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">AI Clip Generation</h3>
                <p class="text-gray-600">AI-powered clip creation and editing tools...</p>
            </div>
        </div>

        <div id="social-section" class="p-6 hidden">
            <div class="dashboard-card p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Social Media Management</h3>
                <p class="text-gray-600">Manage your connected social media accounts...</p>
            </div>
        </div>

        <div id="automation-section" class="p-6 hidden">
            <div class="dashboard-card p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Automation Settings</h3>
                <p class="text-gray-600">Configure your automation rules and preferences...</p>
            </div>
        </div>

        <div id="analytics-section" class="p-6 hidden">
            <div class="dashboard-card p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Analytics & Insights</h3>
                <p class="text-gray-600">Detailed analytics and performance metrics...</p>
            </div>
        </div>
    </div>

    <script>
        // Auth0 Configuration - Using your real credentials
        const auth0Config = {
            domain: 'dev-jwxr8itmvrdgb00h.us.auth0.com',
            clientId: 'ktcrDLuVDPPScCWx3yqRz3loom421sgG'
        };
        
        let auth0 = null;
        let user = null;
        
        // Initialize Auth0
        async function initAuth0() {
            try {
                auth0 = await createAuth0Client(auth0Config);
                
                // Check if user is authenticated
                const isAuthenticated = await auth0.isAuthenticated();
                if (isAuthenticated) {
                    user = await auth0.getUser();
                    updateUserProfile();
                    console.log('User authenticated:', user);
                } else {
                    // Handle the callback
                    const query = window.location.search;
                    if (query.includes('code=') && query.includes('state=')) {
                        await auth0.handleRedirectCallback();
                        user = await auth0.getUser();
                        updateUserProfile();
                        console.log('User authenticated after callback:', user);
                        // Clean up URL
                        window.history.replaceState({}, document.title, window.location.pathname);
                    } else {
                        // Redirect to signup if not authenticated
                        window.location.href = 'signup.html';
                        return;
                    }
                }
                
                // Initialize dashboard data
                await loadDashboardData();
                
            } catch (error) {
                console.error('Auth0 initialization failed:', error);
                window.location.href = 'signup.html';
            }
        }
        
        // Update user profile in UI
        function updateUserProfile() {
            if (user) {
                document.getElementById('user-name').textContent = user.name || user.email || 'User';
                document.getElementById('user-avatar').textContent = (user.name || user.email || 'U').charAt(0).toUpperCase();
            }
        }
        
        // Load dashboard data
        async function loadDashboardData() {
            try {
                // This would connect to your real backend functions
                const response = await fetch('/.netlify/functions/dashboard-api', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        action: 'getDashboardData',
                        userId: user.sub
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    updateDashboard(data);
                }
            } catch (error) {
                console.error('Failed to load dashboard data:', error);
                // Continue with demo data if API fails
            }
        }
        
        // Update dashboard with real data
        function updateDashboard(data) {
            // Update metrics, stream status, etc. with real data
            console.log('Dashboard data loaded:', data);
        }
        
        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('[id$="-section"]').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName + '-section').classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.nav-item').classList.add('active');
            
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'streams': 'Live Streams',
                'clips': 'AI Clips',
                'social': 'Social Media',
                'automation': 'Automation',
                'analytics': 'Analytics'
            };
            
            const subtitles = {
                'dashboard': 'Overview of your streaming automation',
                'streams': 'Monitor and manage your live streams',
                'clips': 'AI-generated clips and highlights',
                'social': 'Connected social media accounts',
                'automation': 'Configure automation settings',
                'analytics': 'Performance metrics and insights'
            };
            
            document.getElementById('page-title').textContent = titles[sectionName];
            document.getElementById('page-subtitle').textContent = subtitles[sectionName];
        }
        
        // Automation controls
        function toggleAutomation(feature) {
            console.log('Toggling automation for:', feature);
            // This would call your real automation functions
        }
        
        // Stream controls
        function startStream() {
            console.log('Starting stream...');
            // This would integrate with your stream monitoring
        }
        
        // Logout function
        async function logout() {
            try {
                await auth0.logout({
                    logoutParams: {
                        returnTo: window.location.origin
                    }
                });
            } catch (error) {
                console.error('Logout failed:', error);
            }
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Fade in animations
            setTimeout(() => {
                document.querySelectorAll('.fade-in').forEach(el => {
                    el.classList.add('visible');
                });
            }, 100);
            
            // Initialize Auth0 and dashboard
            initAuth0();
        });
    </script>
</body>
</html>